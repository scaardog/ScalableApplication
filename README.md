# ScalableApplication
Приложение содержит два модуля:
- usersideapi
- cache

Модуль **cache** создаёт инстанс хранилища hazelcast, а так же инициализирует бакет (Bucket4J), используемый для ограничения запросов.

Модуль **usersideapi** - содержит клиентcкий REST API и обработчик очереди. 
При старте приложения создаётся hazelcast клиент, который по конфигурации пытается подключится к существующему кластеру, 
затем запускается слушатель очереди (QueueService.listen()). Прослушивание очереди выносится в отдельный поток (в текущей конфигурации 1 поток).
При обращении к эндпоинту _/send-message_ создаётся задание в очередь (hazelcast IQueue). В ходе обработки задания происходит попытка получить токен из бакета,
хранящегося в кластере hazelcast. Существует только один бакет для всех инстансов приложения.

При обращении к externalOutbound используется протокол HTTPS. Для этого сконфигурирован restTemplate с кастомным trustStore (scalableTrustStore), 
содержащий самоподписаный сертификат от externalService.